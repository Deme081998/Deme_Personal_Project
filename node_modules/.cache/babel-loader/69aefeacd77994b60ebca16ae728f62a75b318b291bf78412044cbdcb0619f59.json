{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, onBeforeUnmount } from 'vue';\nimport { useCartStore } from '@/stores/cart';\nimport { useRouter } from 'vue-router';\nexport default {\n  __name: 'ConfirmationView',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const cart = useCartStore();\n    const router = useRouter();\n    const orderId = ref(Math.floor(Math.random() * 100000));\n    const orderedItems = ref([]);\n    const orderedTotal = ref(0);\n    const countdown = ref(10);\n    const timer = ref(null); // ðŸ”´ stockage du timer\n\n    function stopTimer() {\n      if (timer.value) {\n        clearInterval(timer.value);\n        timer.value = null;\n      }\n    }\n    function goHome() {\n      stopTimer();\n      router.push('/');\n    }\n    onMounted(() => {\n      orderedItems.value = [...cart.items];\n      orderedTotal.value = cart.totalPrice;\n      cart.clearCart();\n      timer.value = setInterval(() => {\n        countdown.value--;\n        if (countdown.value <= 0) {\n          stopTimer();\n          router.push('/');\n        }\n      }, 1000);\n    });\n    onBeforeUnmount(() => {\n      stopTimer();\n    });\n    const __returned__ = {\n      cart,\n      router,\n      orderId,\n      orderedItems,\n      orderedTotal,\n      countdown,\n      timer,\n      stopTimer,\n      goHome,\n      ref,\n      onMounted,\n      onBeforeUnmount,\n      get useCartStore() {\n        return useCartStore;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","onBeforeUnmount","useCartStore","useRouter","cart","router","orderId","Math","floor","random","orderedItems","orderedTotal","countdown","timer","stopTimer","value","clearInterval","goHome","push","items","totalPrice","clearCart","setInterval"],"sources":["/Users/macbook/IdeaProjects/borne-commande-app/frontend/mon_projet_perso/src/views/ConfirmationView.vue"],"sourcesContent":["<template>\n  <div class=\"confirmation-page\">\n    <h1>Commande confirmÃ©e !</h1>\n    <p>\n      Merci pour votre commande\n      <strong>nÂ°{{ orderId }}</strong> ðŸŽ‰\n    </p>\n\n    <div class=\"summary\">\n      <h2>RÃ©sumÃ© :</h2>\n      <ul>\n        <li v-for=\"(item,i) in orderedItems\" :key=\"i\">\n          <strong>{{ item.name }}</strong> â€“ {{ item.price.toFixed(2) }} â‚¬\n        </li>\n      </ul>\n      <p>Total : {{ orderedTotal.toFixed(2) }} â‚¬</p>\n    </div>\n\n    <p class=\"countdown\">\n      Retour Ã  lâ€™accueil dans\n      <strong>{{ countdown }}</strong>\n      seconde<span v-if=\"countdown > 1\">s</span>...\n    </p>\n\n    <!-- BOUTON AVEC ARRÃŠT DU TIMER -->\n    <button class=\"home-btn\" @click=\"goHome\">\n      Revenir Ã  lâ€™accueil\n    </button>\n  </div>\n</template>\n\n\n<script setup>\nimport { ref, onMounted, onBeforeUnmount } from 'vue'\nimport { useCartStore } from '@/stores/cart'\nimport { useRouter } from 'vue-router'\n\nconst cart = useCartStore()\nconst router = useRouter()\n\nconst orderId = ref(Math.floor(Math.random() * 100000))\nconst orderedItems = ref([])\nconst orderedTotal = ref(0)\nconst countdown = ref(10)\n\nconst timer = ref(null) // ðŸ”´ stockage du timer\n\nfunction stopTimer() {\n  if (timer.value) {\n    clearInterval(timer.value)\n    timer.value = null\n  }\n}\n\nfunction goHome() {\n  stopTimer()\n  router.push('/')\n}\n\nonMounted(() => {\n  orderedItems.value = [...cart.items]\n  orderedTotal.value = cart.totalPrice\n  cart.clearCart()\n\n  timer.value = setInterval(() => {\n    countdown.value--\n    if (countdown.value <= 0) {\n      stopTimer()\n      router.push('/')\n    }\n  }, 1000)\n})\n\nonBeforeUnmount(() => {\n  stopTimer()\n})\n</script>\n\n\n<style scoped>\n.confirmation-page{\n  min-height:100vh;\n  display:flex;\n  flex-direction:column;\n  align-items:center;\n  justify-content:center;\n  text-align:center;\n  padding:1rem;\n  background:url('/public/images/fond.jpg') center/cover; font-family:Arial,sans-serif}\nh1{margin-bottom:1rem}\n.summary{background:rgba(238, 186, 95, 0.9); padding:1rem; border-radius:1rem; max-width:300px; width:90%; margin-bottom:1rem}\n.summary h2{text-decoration:underline;margin-bottom:0.5rem}\n.countdown{margin-top:1rem;color:#555}\n.home-btn{display:inline-block;margin-top:1rem;padding:0.5rem 1.5rem;background:#42b983;color:white;border-radius:2rem;text-decoration:none}\n@media(max-width:480px){ .summary{max-width:90%} h1{font-size:1.5rem} }\n</style>\n"],"mappings":";AAiCA,SAASA,GAAG,EAAEC,SAAS,EAAEC,eAAe,QAAQ,KAAI;AACpD,SAASC,YAAY,QAAQ,eAAc;AAC3C,SAASC,SAAS,QAAQ,YAAW;;;;;;;IAErC,MAAMC,IAAI,GAAGF,YAAY,CAAC;IAC1B,MAAMG,MAAM,GAAGF,SAAS,CAAC;IAEzB,MAAMG,OAAO,GAAGP,GAAG,CAACQ,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAG,MAAM,CAAC;IACtD,MAAMC,YAAY,GAAGX,GAAG,CAAC,EAAE;IAC3B,MAAMY,YAAY,GAAGZ,GAAG,CAAC,CAAC;IAC1B,MAAMa,SAAS,GAAGb,GAAG,CAAC,EAAE;IAExB,MAAMc,KAAK,GAAGd,GAAG,CAAC,IAAI,CAAC,EAAC;;IAExB,SAASe,SAASA,CAAA,EAAG;MACnB,IAAID,KAAK,CAACE,KAAK,EAAE;QACfC,aAAa,CAACH,KAAK,CAACE,KAAK;QACzBF,KAAK,CAACE,KAAK,GAAG,IAAG;MACnB;IACF;IAEA,SAASE,MAAMA,CAAA,EAAG;MAChBH,SAAS,CAAC;MACVT,MAAM,CAACa,IAAI,CAAC,GAAG;IACjB;IAEAlB,SAAS,CAAC,MAAM;MACdU,YAAY,CAACK,KAAK,GAAG,CAAC,GAAGX,IAAI,CAACe,KAAK;MACnCR,YAAY,CAACI,KAAK,GAAGX,IAAI,CAACgB,UAAS;MACnChB,IAAI,CAACiB,SAAS,CAAC;MAEfR,KAAK,CAACE,KAAK,GAAGO,WAAW,CAAC,MAAM;QAC9BV,SAAS,CAACG,KAAK,EAAC;QAChB,IAAIH,SAAS,CAACG,KAAK,IAAI,CAAC,EAAE;UACxBD,SAAS,CAAC;UACVT,MAAM,CAACa,IAAI,CAAC,GAAG;QACjB;MACF,CAAC,EAAE,IAAI;IACT,CAAC;IAEDjB,eAAe,CAAC,MAAM;MACpBa,SAAS,CAAC;IACZ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}